// Do not actually include valo here; the application's stylesheet does that later 
@import "../../../VAADIN/themes/synergy/synergy-button.scss";
@import "../../../VAADIN/themes/synergy/synergy-image.scss";

@mixin synergy(
	$primary-stylename: synergy, 
	$background-color: $v-background-color, 
	$selected-color: $v-focus-color, 
	$ancestor-of-selected-color: auto, 
	$unselected-color: $background-color, 
	$triangle-color: $v-background-color,
	$unit-size: $v-unit-size,
	$triangle-size: auto,
	$spacing: auto) {

	@if $ancestor-of-selected-color == 'auto' {
		@if is-dark-color($background-color) {
			$aos-color: darken($v-focus-color, 25%)			
		} @else {
			$aos-color: lighten($v-focus-color, 25%)
		}
	} @else {
		$aos-color: $ancestor-of-selected-color;
	}
	
	@if $triangle-size == 'auto' {
		$triangle-dim: round($unit-size/6);
	} @else {
		$triangle-dim: $triangle-size;
	}
	
	@if $spacing == 'auto' {
		$spacing-dim: round($unit-size/3);
	} @else {
		$spacing-dim: $spacing;
	}
	
	@include synergy-button($primary-stylename: #{$primary-stylename}-button-synergy-unselected, $background-color: $unselected-color, $hover-color: $selected-color);
	@include synergy-button($primary-stylename: #{$primary-stylename}-button-synergy-selected, $background-color: $selected-color);
	@include synergy-button($primary-stylename: #{$primary-stylename}-button-synergy-ancestor-of-selected, $background-color: $aos-color, $hover-color: $selected-color);

	.#{$primary-stylename}-button-vertical {
		text-align: left;
		width: 100%;
        margin: $spacing-dim 0 0 0;
	}
	
	@include synergy-image($primary-stylename: #{$primary-stylename}-image-synergy-unselected, $background-color: $unselected-color, $hover-color: $selected-color);
	@include synergy-image($primary-stylename: #{$primary-stylename}-image-synergy-selected, $background-color: $selected-color);
	@include synergy-image($primary-stylename: #{$primary-stylename}-image-synergy-ancestor-of-selected, $background-color: $aos-color, $hover-color: $selected-color);

	.#{$primary-stylename}-image-vertical {
        margin: $spacing-dim 0 0 0;
	}

    @if $triangle-color != 'none' {
		.#{$primary-stylename}-vertical .v-slot-synergy-selected:after {
			// triangle
			content: "";
			position:relative;
			border-top: $triangle-dim solid transparent;
			border-bottom: $triangle-dim solid transparent;
			border-right: $triangle-dim solid $triangle-color;
			margin-left: -$triangle-dim;
			vertical-align: text-bottom;
	    }
	}

	.#{$primary-stylename}-button-horizontal {
		text-align: center;
        margin: 0 $spacing-dim;
	}

    @if $triangle-color != 'none' {
		.#{$primary-stylename}-horizontal .v-slot-synergy-selected:after {
			// triangle
			content: "";
			position:absolute;
			border-left: $triangle-dim solid transparent;
			border-bottom: $triangle-dim solid $triangle-color;
			border-right: $triangle-dim solid transparent;
			margin-top: $unit-size - $triangle-dim;
			margin-left: -$triangle-dim;
			left: 50%;
	    }
	}
	
	.#{$primary-stylename} {
		background-color: transparent;
	}
	
	.#{$primary-stylename} .v-verticallayout {
		.v-slot-wrapper.v-slot-synergy-selected {
			background-color: $selected-color;
			padding-bottom: $spacing-dim;
		}
		.v-slot-wrapper.v-slot-synergy-ancestor-of-selected {
			background-color: $aos-color;
			padding-bottom: $spacing-dim;
		}
	}
	
	.#{$primary-stylename}-horizontal {
		.v-horizontallayout {
			margin: $spacing-dim $spacing-dim 0 $spacing-dim;
		}
			
		.synergy-selected {
			background-color: $selected-color;
		}
		
		.synergy-ancestor-of-selected {
			background-color: $aos-color;
		}
	}
	
}
